<section id="framework-getting-started" class="page-section">
    <div class="container-fluid">
        <div class="row flex-xl-nowrap">
            <aside class="bd-sidebar">
                <framework-aside></framework-aside>
            </aside>
            <div class="bd-content">
                <section>
                     <header>
                       <h1>Inugami Framework : Getting started</h1>
                    </header>

                    <!--################################################################################################
                    # MAIN
                    #################################################################################################-->
                    <main>
                        <p>
                            To meet the requirements of <em>the Inugami project</em>, we developed a dedicated framework
                            designed to structure the application and manage internal monitoring and error handling.
                        </p>
                        <p>
                            Indeed, most development issues are common across projects. It was this very realization that led to the 
                            creation of the Inugami framework.
                        </p>
                        <p>
                           Ultimately, the goal of this framework is to ensure that any application is <em>production-ready</em> while
                           maintaining the highest quality standards.
                        </p>


                        <!--****************************************************************************************
                        ** ARCHETYPE
                        ****************************************************************************************-->
                        <article>
                                <header>
                                    <a href="inugami/framework/getting-started#archetype"><h2 id="archetype">Archetype</h2></a>
                                </header>
                                <div class="content">
                                    <p>
                                        To jumpstart your project, use the Inugami Spring Boot Maven archetype.
                                        It scaffolds a complete <em>Java 21</em> and <em>Spring Boot 3</em> environment 
                                        with Inugami ready to use out of the box.
                                    </p>

                                    <p>
                                        This is also an ideal case study for detailing the different functionalities 
                                        of the Inugami framework.
                                    </p>
                                    <inu-code url="data/inugami/inugami_gav.xml" tag="inugami_maven_springboot_run"></inu-code>
                                
                                    <p>
                                        You can find a sample Spring Boot application generated with this Maven archetype by following this link:
                                        <a href="https://github.com/inugamiio/inugami-demo" target="_blank">https://github.com/inugamiio/inugami-demo</a>
                                    </p>


                                    <inu-doc-item title="Archetype architecture" [level]="3" href="inugami-project-analysis-maven-plugin#archetype-architecture" id="archetype-architecture">
                                        <p>
                                            The generated project follows a <em>Hexagonal Architecture</em>. This approach ensures a clean isolation of responsibilities 
                                            for each part of the application. While this architecture may be slightly confusing
                                            for less experienced developers, it will be explained in detail here.
                                        </p>
                                        
                                        <div class="row-reverse">
                                            <figure class="size-20 padding-right-4">
                                                <img src="images/framework/archetype-architecture.png" alt="archetype architecture" />
                                            </figure>

                                            <div class="size-fit">
                                                The project is broken down into the following modules:
                                                <ul>
                                                    <li>"demo-api": Contains all DTOs and interfaces used by the application core.</li>
                                                    <li>"demo-core": The heart of the application. This module contains all the business logic.</li>
                                                    <li>"demo-infrastructure": Handles database access and external web service calls to other applications.</li>
                                                    <li>"demo-interfaces": The REST exposure layer of the application.</li>
                                                    <li>"demo-webapp": The final module that assembles all other modules into a single Spring Boot application.</li>
                                                </ul>

                                                <cite class="info">
                                                    By implementing the hexagonal architecture layers as distinct 
                                                    <em>Maven modules</em>, we can guarantee strong isolation between
                                                    the different parts of the application.
                                                </cite>

                                                <cite class="info">
                                                    Each module is also pre-configured as a Java Module <em>(JPMS)</em>.
                                                </cite>

                                            </div>
                                            
                                        </div>
                                    </inu-doc-item>
                                </div>                                
                            </article>


                        <!--****************************************************************************************
                        ** First run
                        ****************************************************************************************-->
                        <article>
                            <header>
                                    <a href="inugami/framework/getting-started#first-run"><h2 id="first-run">First run</h2></a>
                            </header>
                             <div class="row-reverse">
                                <figure class="size-20 padding-right-4">
                                    <img src="images/framework/mvn-clean-install.png" alt="maven run" style="width: 20rem;" />
                                </figure>

                                <div class="size-fit">
                                    As with most Java projects, building the project only requires executing the following Maven command from the project root:
                                    <inu-code url="data/inugami/framework/source_code.xml" tag="mvn_clean_install" ></inu-code>

                                    <p>
                                        Compilation performance varies significantly depending on the hardware.
                                        For this example, the build process took approximately 2 minutes to 
                                        run all unit and integration tests.
                                    </p>
                                </div>
                            </div>

                            <p>
                                From your IDE, you can run the <em>com.my.project.webapp.Application</em> class to start the Spring Boot application.
                            </p>
                            
                            <figure>
                                    <img src="images/framework/run_01.png" alt="springboot run" width="70%"/>
                            </figure>
                            <figure>
                                    <img src="images/framework/run_02.png" alt="springboot run" width="70%" />
                            </figure>
                            
                            Once the application is up and running, you can access the <em>OpenAPI</em> documentation here:
                            <a href="http://localhost:8080/swagger-ui/index.html" target="_blank">http://localhost:8080/swagger-ui/index.html</a>

                            <figure>
                                    <img src="images/framework/openapi_01.png" alt="open api" width="70%" />
                            </figure>


                            <p>
                                A Postman collection is provided in the <em>local-integration-test</em> directory to help you test the generated application.
                            </p>
                            <figure>
                                    <img src="images/framework/postman_01.png" alt="postman call success" width="70%" />
                            </figure>

                            <p>
                                For every request to the application, a log named IOLOG is generated:
                            </p>
                            <ul>
                                <li>One upon the initial request</li>
                                <li>A second one upon the response</li>
                            </ul>
                            <p>
                                These IOLOGs allow you to precisely track the instructions sent to the server and follow
                                the different calls associated with a specific user.
                            </p>

                            <inu-code url="data/inugami/framework/source_code.xml" tag="iolog"></inu-code>

                            <p>
                                Every application must handle its errors, and the Postman collection also allows you to observe 
                                the application's behavior when an error occurs. Inugami includes a Spring service that 
                                intercepts all errors and returns a detailed error response compliant with the <em>RFC 9457</em> standard.
                            </p>
                            <cite class="info">
                               If you would like to learn more about the RFC 9457 specification, 
                               please refer to the following documentation: <a href="https://datatracker.ietf.org/doc/rfc9457/" target="_blank">https://datatracker.ietf.org/doc/rfc9457</a>
                            </cite>

                            <figure>
                                    <img src="images/framework/postman_02.png" alt="postman call success" width="70%" />
                            </figure>
                            
                            <inu-code url="data/inugami/framework/source_code.xml" tag="error_response"></inu-code>

                            <cite class="info">
                                For further details on how Inugami manages errors, please refer to the relevant section :
                                <a routerLink="/inugami/framework/exception">Exception management</a>
                            </cite>
                        </article>

                        <!--****************************************************************************************
                        ** MODULES DETAILS
                        ****************************************************************************************-->
                        <article>
                            <header>
                                    <a href="inugami/framework/getting-started#modules-details"><h2 id="modules-details">Modules details</h2></a>
                            </header>

                            <inu-doc-item title="Module API" [level]="3" href="inugami-project-analysis-maven-plugin#module-api" id="module-api">
                                <p>
                                    The demo-api module serves as the central contract layer. It houses all the DTOs used by the application core.
                                    Its purpose is to facilitate data exchange:
                                </p>

                                <ul>
                                    <li>Between REST controllers and the domain.</li>
                                    <li>Among internal core services.</li>
                                    <li>Between the core and the infrastructure layer.</li>
                                </ul>

                                <inu-code url="data/inugami/framework/source_code.xml" tag="demo-api"></inu-code>
                                <p>
                                    Following standard Java modularity, each module includes a module-info.java file at its root.
                                </p>

                                <cite class="danger">
                                    It is mandatory for Java module names to match their base package. 
                                    Deviating from this standard will cause module import failures.
                                </cite>


                                <div class="row-reverse">
                                    <figure class="size-20 padding-right-4">
                                        <img src="images/framework/module_api_01.png" alt="module-api" />
                                    </figure>

                                    <div class="size-fit">
                                        <p>
                                            The demo-api module is straightforward. We have implemented only one domain
                                        (<em>users</em>) for demonstration purposes. In a production-grade application,
                                        this identical structure would be replicated across all application domains.
                                        </p>
                                       
                                        <dl>
                                            <dt>UserDTO</dt>
                                            <dd>The primary DTO containing user information.</dd>

                                            <dt>UserDTOSearchRequestDTO</dt>
                                            <dd>The DTO containing the various search parameters for a user.</dd>

                                            <dt>UserFilters</dt>
                                            <dd>Information filtering requires knowing the criteria types (inclusive parameters, exact matches, range-based boundaries, etc.).</dd>

                                            <dt>UserErrors</dt>
                                            <dd>All domain-specific error codes are defined via an enumeration.</dd>


                                            <dt>IUserDao</dt>
                                            <dd>The interface for the user data access service.</dd>

                                            <dt>IUserService</dt>
                                            <dd>The main service providing CRUD operations (Create, Read, Update, Delete) for users.</dd>
                                        </dl>
                                    </div>
                                </div>
                            </inu-doc-item>
                        </article>
                    </main>
                </section>
            </div>
        </div>
    </div>
</section>