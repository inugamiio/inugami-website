<section id="framework-getting-started" class="page-section">
    <div class="container-fluid">
        <div class="row flex-xl-nowrap">
            <aside class="bd-sidebar">
                <framework-aside></framework-aside>
            </aside>
            <div class="bd-content">
                <section>
                     <header>
                       <h1>Inugami Framework : Getting started</h1>
                    </header>

                    <!--################################################################################################
                    # MAIN
                    #################################################################################################-->
                    <main>
                        <p>
                            To meet the requirements of <em>the Inugami project</em>, we developed a dedicated framework
                            designed to structure the application and manage internal monitoring and error handling.
                        </p>
                        <p>
                            Indeed, most development issues are common across projects. It was this very realization that led to the 
                            creation of the Inugami framework.
                        </p>
                        <p>
                           Ultimately, the goal of this framework is to ensure that any application is <em>production-ready</em> while
                           maintaining the highest quality standards.
                        </p>


                        <!--****************************************************************************************
                        ** ARCHETYPE
                        ****************************************************************************************-->
                        <article>
                                <header>
                                    <a href="inugami/framework/getting-started#archetype"><h2 id="archetype">Archetype</h2></a>
                                </header>
                                <div class="content">
                                    <p>
                                        To jumpstart your project, use the Inugami Spring Boot Maven archetype.
                                        It scaffolds a complete <em>Java 21</em> and <em>Spring Boot 3</em> environment 
                                        with Inugami ready to use out of the box.
                                    </p>

                                    <p>
                                        This is also an ideal case study for detailing the different functionalities 
                                        of the Inugami framework.
                                    </p>
                                    <inu-code url="data/inugami/inugami_gav.xml" tag="inugami_maven_springboot_run"></inu-code>
                                
                                    <p>
                                        You can find a sample Spring Boot application generated with this Maven archetype by following this link:
                                        <a href="https://github.com/inugamiio/inugami-demo" target="_blank">https://github.com/inugamiio/inugami-demo</a>
                                    </p>


                                    <inu-doc-item title="Archetype architecture" [level]="3" href="inugami/framework/getting-started#archetype-architecture" id="archetype-architecture">
                                        <p>
                                            The generated project follows a <em>Hexagonal Architecture</em>. This approach ensures a clean isolation of responsibilities 
                                            for each part of the application. While this architecture may be slightly confusing
                                            for less experienced developers, it will be explained in detail here.
                                        </p>
                                        
                                        <div class="row-reverse">
                                            <figure class="size-20 padding-right-4">
                                                <img src="images/framework/archetype-architecture.png" alt="archetype architecture" />
                                            </figure>

                                            <div class="size-fit">
                                                The project is broken down into the following modules:
                                                
                                                <dl>
                                                    <dt>demo-api</dt>
                                                    <dd>Contains all DTOs and interfaces used by the application core.</dd>

                                                    <dt>demo-core</dt>
                                                    <dd>The heart of the application. This module contains all the business logic.</dd>

                                                    <dt>demo-infrastructure</dt>
                                                    <dd>Handles database access and external web service calls to other applications.</dd>

                                                    <dt>demo-interfaces</dt>
                                                    <dd>The REST exposure layer of the application.</dd>

                                                    <dt>demo-webapp</dt>
                                                    <dd>The final module that assembles all other modules into a single Spring Boot application.</dd>
                                                </dl>
                                                
                                                <cite class="info">
                                                    By implementing the hexagonal architecture layers as distinct 
                                                    <em>Maven modules</em>, we can guarantee strong isolation between
                                                    the different parts of the application.
                                                </cite>

                                                <cite class="info">
                                                    Each module is also pre-configured as a Java Module <em>(JPMS)</em>.
                                                </cite>

                                            </div>
                                            
                                        </div>
                                    </inu-doc-item>
                                </div>                                
                            </article>


                        <!--****************************************************************************************
                        ** First run
                        ****************************************************************************************-->
                        <article>
                            <header>
                                    <a href="inugami/framework/getting-started#first-run"><h2 id="first-run">First run</h2></a>
                            </header>
                             <div class="row-reverse">
                                <figure class="size-20 padding-right-4">
                                    <img src="images/framework/mvn-clean-install.png" alt="maven run" style="width: 20rem;" />
                                </figure>

                                <div class="size-fit">
                                    As with most Java projects, building the project only requires executing the following Maven command from the project root:
                                    <inu-code url="data/inugami/framework/source_code.xml" tag="mvn_clean_install" ></inu-code>

                                    <p>
                                        Compilation performance varies significantly depending on the hardware.
                                        For this example, the build process took approximately 2 minutes to 
                                        run all unit and integration tests.
                                    </p>
                                </div>
                            </div>

                            <p>
                                From your IDE, you can run the <em>com.my.project.webapp.Application</em> class to start the Spring Boot application.
                            </p>
                            
                            <figure>
                                    <img src="images/framework/run_01.png" alt="springboot run" width="70%"/>
                            </figure>
                            <figure>
                                    <img src="images/framework/run_02.png" alt="springboot run" width="70%" />
                            </figure>
                            
                            Once the application is up and running, you can access the <em>OpenAPI</em> documentation here:
                            <a href="http://localhost:8080/swagger-ui/index.html" target="_blank">http://localhost:8080/swagger-ui/index.html</a>

                            <figure>
                                    <img src="images/framework/openapi_01.png" alt="open api" width="70%" />
                            </figure>


                            <p>
                                A Postman collection is provided in the <em>local-integration-test</em> directory to help you test the generated application.
                            </p>
                            <figure>
                                    <img src="images/framework/postman_01.png" alt="postman call success" width="70%" />
                            </figure>

                            <p>
                                For every request to the application, a log named IOLOG is generated:
                            </p>
                            <ul>
                                <li>One upon the initial request</li>
                                <li>A second one upon the response</li>
                            </ul>
                            <p>
                                These IOLOGs allow you to precisely track the instructions sent to the server and follow
                                the different calls associated with a specific user.
                            </p>

                            <inu-code url="data/inugami/framework/source_code.xml" tag="iolog"></inu-code>

                            <p>
                                Every application must handle its errors, and the Postman collection also allows you to observe 
                                the application's behavior when an error occurs. Inugami includes a Spring service that 
                                intercepts all errors and returns a detailed error response compliant with the <em>RFC 9457</em> standard.
                            </p>
                            <cite class="info">
                               If you would like to learn more about the RFC 9457 specification, 
                               please refer to the following documentation: <a href="https://datatracker.ietf.org/doc/rfc9457/" target="_blank">https://datatracker.ietf.org/doc/rfc9457</a>
                            </cite>

                            <figure>
                                    <img src="images/framework/postman_02.png" alt="postman call success" width="70%" />
                            </figure>
                            
                            <inu-code url="data/inugami/framework/source_code.xml" tag="error_response"></inu-code>

                            <cite class="info">
                                For further details on how Inugami manages errors, please refer to the relevant section :
                                <a routerLink="/inugami/framework/exception">Exception management</a>
                            </cite>
                        </article>

                        <!--****************************************************************************************
                        ** MODULES DETAILS
                        ****************************************************************************************-->
                        <article>
                            <header>
                                    <a href="inugami/framework/getting-started#modules-details"><h2 id="modules-details">Modules details</h2></a>
                            </header>

                            <inu-doc-item title="Module API" [level]="3" href="inugami/framework/getting-started#module-api" id="module-api">
                                <p>
                                    The demo-api module serves as the central contract layer. It houses all the DTOs used by the application core.
                                    Its purpose is to facilitate data exchange:
                                </p>

                                <ul>
                                    <li>Between REST controllers and the domain.</li>
                                    <li>Among internal core services.</li>
                                    <li>Between the core and the infrastructure layer.</li>
                                </ul>

                                <inu-code url="data/inugami/framework/source_code.xml" tag="demo-api"></inu-code>
                                <p>
                                    Following standard Java modularity, each module includes a module-info.java file at its root.
                                </p>

                                <cite class="danger">
                                    It is mandatory for Java module names to match their base package. 
                                    Deviating from this standard will cause module import failures.
                                </cite>


                                <div class="row-reverse">
                                    <figure class="size-20 padding-right-4">
                                        <img src="images/framework/module_api_01.png" alt="module-api" />
                                    </figure>

                                    <div class="size-fit">
                                        <p>
                                            The demo-api module is straightforward. We have implemented only one domain
                                        (<em>users</em>) for demonstration purposes. In a production-grade application,
                                        this identical structure would be replicated across all application domains.
                                        </p>
                                       
                                        <dl>
                                            <dt>UserDTO</dt>
                                            <dd>The primary DTO containing user information.</dd>

                                            <dt>UserDTOSearchRequestDTO</dt>
                                            <dd>The DTO containing the various search parameters for a user.</dd>

                                            <dt>UserFilters</dt>
                                            <dd>Information filtering requires knowing the criteria types (inclusive parameters, exact matches, range-based boundaries, etc.).</dd>

                                            <dt>UserErrors</dt>
                                            <dd>All domain-specific error codes are defined via an enumeration.</dd>


                                            <dt>IUserDao</dt>
                                            <dd>The interface for the user data access service.</dd>

                                            <dt>IUserService</dt>
                                            <dd>The main service providing CRUD operations (Create, Read, Update, Delete) for users.</dd>
                                        </dl>
                                    </div>
                                </div>


                                <inu-doc-item title="UserDTO" [level]="4" href="inugami/framework/getting-started#demo-api-userDto" id="demo-api-userDto">
                                    <inu-code url="data/inugami/framework/source_code.xml" tag="demo-api-userDto"></inu-code>
                                    <p>
                                        These DTOs follow standard Java conventions. <em>Lombok</em> is integrated to handle 
                                        the generation of redundant methods (getters, setters, etc.), reducing boilerplate code.
                                    </p>
                                    <cite class="danger">
                                        <p>
                                            All DTOs must define the following methods:
                                        </p>
                                        <ul>
                                            <li>equals</li>
                                            <li>hashCode</li>
                                            <li>getters / setters</li>
                                        </ul>
                                        Additionally, they must implement the Serializable interface. Since DTOs may be 
                                        stored in collections or Maps, these methods are essential for their proper behavior.
                                    </cite>

                                    <p>
                                        To guarantee that these essential DTO methods function correctly, unit testing is necessary.
                                        Many projects neglect testing their DTOs; while this may seem excessive, they are at
                                        the very heart of the business logic. Tools like <em>Lombok</em> and <em>MapStruct</em> perform invisible
                                        transformations in the source code. If a DTO or an entity is modified, server responses can change.
                                        Such changes can cause side effects on the frontend or, even worse, within the business logic itself.
                                    </p>
                                    
                                    <p>
                                        Tester ses DTO peut être long et fastidieux, du fait qu'il faut s'assurer de la structure du DTO.
                                        Pour aider à cela, Inugami contient une classe utilitaire nommé UnitTestHelper. Cette classe contient
                                        beaucoup d'utilitaires pour faciliter les tests unitaires, dont la méthode assertDto.
                                    </p>

                                    <p>
                                        The <em>UnitTestHelper</em> class is included in the inugami_commons_test module:
                                    </p>
                                    <inu-code url="data/inugami/inugami_gav.xml" tag="inugami_commons_test"></inu-code>

                                    <cite class="warning">
                                        Even though it is a standard Java module (<em>io.inugami.commons.test</em>), 
                                        it should be added to your project using the test scope, unless you are building 
                                        a custom testing framework.
                                    </cite>

                                    <inu-code url="data/inugami/framework/source_code.xml" tag="demo-api-userDto-test"></inu-code>

                                    <p>
                                        We configure the assertDto context to validate the DTO’s integrity. This example covers:
                                    </p>
                                    <ul>
                                        <li><strong>toBuilder</strong> functionality.</li>
                                        <li><strong>No-argument and all-argument</strong> constructors.</li>
                                        <li><strong>Jackson serialization</strong> through a reference file (specified by fullArgConstructorRefPath).</li>
                                        <li><strong>Getter-based projection</strong> validation against reference data.</li>
                                        <li><strong>Standard Object methods</strong>: toString, equals, and hashCode.</li>
                                        <li><strong>Setter</strong> logic verification.</li>
                                    </ul>

                                    <cite class="success">
                                        <p>
                                            Inugami mandates the construction of a fully populated DTO for testing purposes. 
                                            Implementing a generator method for this DTO is highly beneficial for:
                                        </p>
                                        <ul>
                                            <li><strong>Core-level</strong> business logic testing.</li>
                                            <li>Validating <strong>DTO/Entity</strong> mapping.</li>
                                            <li>Ensuring consistency between <strong>internal DTOs</strong> and the <strong>models</strong> used by REST interfaces.</li>
                                        </ul>
                                    </cite>
                                </inu-doc-item>

                                <inu-doc-item title="UserDTOSearchRequestDTO" [level]="4" href="inugami/framework/getting-started#demo-api-userDTOSearchRequestDTO" id="demo-api-userDTOSearchRequestDTO">
                                    <p>
                                        <em>UserDTOSearchRequestDTO</em> holds the search criteria and closely mirrors the UserDTO.
                                        Since this DTO is never stored in collections or maps, it does not need to override equals or hashCode.
                                    </p>
                                    
                                    
                                    <inu-code url="data/inugami/framework/source_code.xml" tag="demo-api-userDto-userDTOSearchRequestDTO"></inu-code>

                                    <p>
                                        Similar to the UserDTO test, this implementation specifies that <em>equals and hashCode validation should be bypassed</em>.
                                    </p>

                                    <inu-code url="data/inugami/framework/source_code.xml" tag="demo-api-userDto-userDTOSearchRequestDTO-test"></inu-code>
                                </inu-doc-item>




                                <inu-doc-item title="UserDTOSearchRequestDTO" [level]="4" href="inugami/framework/getting-started#demo-api-userDTOSearchRequestDTO" id="demo-api-userDTOSearchRequestDTO">
                                    <p>
                                        <em>UserDTOSearchRequestDTO</em> holds the search criteria and closely mirrors the UserDTO.
                                        Since this DTO is never stored in collections or maps, it does not need to override equals or hashCode.
                                    </p>
                                    
                                    
                                    <inu-code url="data/inugami/framework/source_code.xml" tag="demo-api-userDto-userDTOSearchRequestDTO"></inu-code>

                                    <p>
                                        Similar to the UserDTO test, this implementation specifies that <em>equals and hashCode validation should be bypassed</em>.
                                    </p>

                                    <inu-code url="data/inugami/framework/source_code.xml" tag="demo-api-userDto-userDTOSearchRequestDTO-test"></inu-code>
                                </inu-doc-item>


                                <inu-doc-item title="UserFilters" [level]="4" href="inugami/framework/getting-started#demo-api-userFilters" id="demo-api-userFilters">
                                    <p>
                                        The <em>UserFilters</em> utility class maps the search logic to the various fields provided in the <strong>UserDTOSearchRequestDTO</strong>.
                                    </p>
                                    <cite class="info">
                                        At present, Inugami does not provide full support for search filters.
                                        Future releases will leverage them to automatically generate search predicates.
                                    </cite>
                                    
                                    
                                    <inu-code url="data/inugami/framework/source_code.xml" tag="demo-api-userFilters"></inu-code>

                                    <p>
                                        Unit testing is essential for validating class behavior. 
                                        <em>Inugami</em> contributes specialized utility methods to simplify the testing process for these objects.
                                    </p>

                                    <inu-code url="data/inugami/framework/source_code.xml" tag="demo-api-userFiltersTest"></inu-code>


                                    <p>
                                        This unit test provides a great example of how to use two especially useful methods from the UnitTestHelper class:
                                    </p>



                                    <dl>
                                        <dt>assertUtilityClassLombok</dt>
                                        <dd>This method validates that the @UtilityClass annotation is working as expected
                                            by checking that the target class meets all utility class requirements
                                            (e.g., private constructor, final class).
                                        </dd>

                                        <dt>assertText</dt>
                                        <dd>Arguably the most essential method in UnitTestHelper. It performs a complete
                                            object verification by using Jackson projection to compare the object's state.
                                        </dd>
                                    </dl>

                                    <cite class="info">

                                        <div class="images-flex">
                                            <figure>
                                                <img src="images/framework/asserttext-01.png" alt="assertText failure current value"  style="height:40rem" />
                                            </figure>
                                            <figure>
                                                <img src="images/framework/asserttext-02.png" alt="assertText failure diff" style="height:40rem"/>
                                            </figure>
                                        </div>
                                        <p>
                                            If a test fails, the assertText method outputs the actual object projection 
                                            along with a differential comparison to the reference value. 
                                            Lines containing differences are marked in red for easy identification of the issues.
                                        </p>

                                    </cite>
                                </inu-doc-item>

                                <inu-doc-item title="Services interfaces" [level]="4" href="inugami/framework/getting-started#demo-api-service" id="demo-api-service">
                                    <p>
                                        To handle data related to the user domain, both a service class and a data access 
                                        class are required. Consequently, two interfaces for these services are defined within the API layer (IUserService and IUserDao).
                                    </p>
                                    <p>
                                        According to the archetype example, the services are limited to standard CRUD operations.
                                    </p>

                                    
                                    <inu-code url="data/inugami/framework/source_code.xml" tag="demo-api-iUserService"></inu-code>
                                    <p>
                                        Given that our service handles only pure CRUD operations, it can directly implement
                                        <em>the Inugami Crud interface</em>. This interface provides all the standard CRUD method definitions.
                                    </p>
                                    <inu-code url="data/inugami/framework/source_code.xml" tag="crud"></inu-code>

                                    <inu-code url="data/inugami/framework/source_code.xml" tag="demo-api-iUserDao"></inu-code>
                                    <p>
                                        The same applies to the DAO layer.
                                    </p>
                                    <inu-code url="data/inugami/framework/source_code.xml" tag="crudDao"></inu-code>
                                </inu-doc-item>
                            
                                <inu-doc-item title="UserErrors" [level]="4" href="inugami/framework/getting-started#demo-api-userErrors" id="demo-api-userErrors">
                                    <p>
                                        Exception management is often a thorny issue in application development. 
                                        Many projects create custom exceptions to implement their error-handling logic.
                                        While this approach is common, it is only relevant when a workaround or recovery
                                        action is actually possible. Unfortunately, in the majority of cases, no such workaround exists.
                                        It is therefore preferable to have an exception-handling mechanism that reflects
                                        the reality of modern applications.
                                    </p>
                                        
                                    <p>
                                        Another drawback of creating specific exceptions is the difficulty—or even 
                                        impossibility—of achieving high granularity. It is impractical to define a unique 
                                        exception for every potential error case. This approach mechanically forces 
                                        developers to reduce the number of exceptions, thereby drowning out the precision
                                        of error detection.
                                    </p>

                                    <inu-code url="data/inugami/framework/source_code.xml" tag="userErrors"></inu-code>

                                    <p>
                                       Error codes provide significant context, making them highly effective for both 
                                       MDC logging and frontend integration, particularly for handling form validation errors.
                                    </p>
                                    <inu-code url="data/inugami/framework/source_code.xml" tag="errorCode"></inu-code>

                                    <cite class="danger">
                                        <p>
                                            Error codes are required to be unique. To ensure compliance, unit tests must
                                            be implemented for all error enums within each domain.
                                        </p>
                                        <p>
                                            To perform these tests, Inugami includes methods within the UnitTestHelper
                                            class to simplify their implementation:
                                        </p>

                                        <dl>
                                            <dt>assertErrorCodeUnique</dt>
                                            <dd>To verify that no duplicates are present within the enumerations.</dd>

                                            <dt>assertErrorCode</dt>
                                            <dd>To guarantee the proper definition of the various error codes.</dd>
                                        </dl>
                                        
                                        <inu-code url="data/inugami/framework/source_code.xml" tag="userErrorsTest"></inu-code>
                                    </cite>
                                    
                                    
                                </inu-doc-item>
                            </inu-doc-item>
                        </article>
                    </main>
                </section>
            </div>
        </div>
    </div>
</section>