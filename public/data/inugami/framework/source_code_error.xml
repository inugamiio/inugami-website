<xml>


    <src name="asserts_usage" type="java" title="Asserts method usage">
        <![CDATA[
Asserts.assertEquals("1", "2");
Asserts.assertEquals("sorry for this error", "1", "2");
Asserts.assertEquals( () -> "some error", "1", "2");
Asserts.assertEquals( CREATE_TYPE_INVALID, "1", "2");
]]>
    </src>

    <src name="server_response" type="json" title="Server response">
        <![CDATA[
{
    "cause": {
        "errors": [],
        "message": "user not found",
        "parameters": []
    },
    "detail": "",
    "details": {
        "errorCode": "USER-2_1",
        "fields": [],
        "errorType": "functional",
        "rollback": false,
        "retryable": false,
        "errorDomain": "USER"
    },
    "errors": [],
    "message": "user not found",
    "parameters": [],
    "reasonPhrase": "Not Found",
    "status": 404
}
]]>
    </src>

    <src name="server_response_reduce_config" type="yaml" title="application.yaml">
        <![CDATA[
application:
    # name for your project wiki page
    name: "demo"
    # wiki error page pattern
    wiki: "https://inugami.io/mock/error/{0}/{1}"
inugami:
    monitoring:
        exception:
            show:
                detail:
                    enabled: false
]]>
    </src>

    <src name="server_response_reduce" type="json" title="Server response reduced">
        <![CDATA[
{
    "details": {
        "errorCode": "USER-2_0",
        "fields": []
    },
    "errors": [],
    "parameters": [],
    "reasonPhrase": "Bad Request",
    "status": 400
}
]]>
    </src>

    <src name="xllog_error_code" type="text" title="Error code who produce XLLOG">
        <![CDATA[
public enum UserErrors implements ErrorCode {
    //==================================================================================================================
    // 0 - GENERIC
    //==================================================================================================================
    // ...

    DATABASE_DOWN(newBuilder().errorCode("USER-0_1")
                              .message("database is down")
                              .domain(Constants.USER)
                              .exploitationError(true)
                              .statusCode(500)
                              .errorTypeTechnical()),

    //...
}
]]>
    </src>

    <src name="xllog_logback" type="text" title="Logback configuration to show errorUrl value">
        <![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<configuration>

    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>[%d{dd/MM HH:mm:ss}]|%logger|%-5level|%thread| %X{errorUrl} | %msg\n</pattern>
        </encoder>
    </appender>

    <appender name="ASYNC_STDOUT" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="STDOUT" />
    </appender>


    <root level="DEBUG">
        <appender-ref ref="ASYNC_STDOUT"/>
    </root>

</configuration>
]]>
    </src>

    <src name="xllog" type="text" title="XLLOG">
        <![CDATA[
[06/01 14:04:41]|XLLOG|ERROR|http-nio-8080-exec-2| https://inugami.io/mock/error/demo/USER-0_1 | database is down
]]>
    </src>

    <src name="MyProblemAdditionalFieldSPIModule" type="java" title="module-info.java">
        <![CDATA[
open module com.my.project.webapp {
    requires io.inugami.framework.interfaces;

    provides io.inugami.framework.interfaces.exceptions.ProblemAdditionalFieldBuilder with com.my.project.webapp.error.MyProblemAdditionalFieldSPI;
}
]]>
    </src>
    <src name="MyProblemAdditionalFieldSPI" type="java"
        title="Custom ProblemAdditionalFieldBuilder defined as SPI">
        <![CDATA[
@Slf4j
public class MyProblemAdditionalFieldSPI implements ProblemAdditionalFieldBuilder {
    @Override
    public void addInformation(final ProblemDTO.ProblemDTOBuilder problemBuilder,
                               final Throwable exception,
                               final ErrorCode errorCode) {
        log.info("error code : {}", errorCode);
    }
}
]]>
    </src>

    <src name="MyProblemAdditionalField" type="java"
        title="Custom ProblemAdditionalFieldBuilder defined as Spring bean">
        <![CDATA[
@Slf4j
@Component
public class MyProblemAdditionalField implements ProblemAdditionalFieldBuilder {
    @Override
    public void addInformation(final ProblemDTO.ProblemDTOBuilder problemBuilder,
                               final Throwable exception,
                               final ErrorCode errorCode) {

        // RequestContext allows to retrieve all incoming HTTP request information
        final  RequestData currentRequest = RequestContext.getInstance();
        log.info("uri : {}", currentRequest.getUri());
    }
}
]]>
    </src>


    <src name="ErrorCodeResolver" type="java" title="ErrorCodeResolver">
        <![CDATA[
@FunctionalInterface
public interface ErrorCodeResolver {

    ErrorCode resolve(final Throwable exception);
}
]]>
    </src>

    <src name="ErrorCodeResolverExample" type="java" title="Custom ErrorCodeResolver example">
        <![CDATA[
@Component
public class JpaErrorCodeResolver implements ErrorCodeResolver {

    @Override
    public ErrorCode resolve(Throwable throwable) {
        if (throwable instanceof DataIntegrityViolationException) {
            return DefaultErrorCode.builder()
                                   .errorCode("DB-UNIQUE-01")
                                   .message("This record already exists in the database")
                                   .errorTypeFunctional()
                                   .statusCode(409) // Conflict
                                   .build();
        }
        return null;
    }
}
]]>
    </src>

    <src name="iologError" type="text" title="IOLOG error">
        <![CDATA[
[06/01 17:59:44]|IOLOG|ERROR|http-nio-8080-exec-1| USER-2_0 | [GET] /ws/user/bad_uid
headers :
	accept: */*
	accept-encoding: gzip, deflate, br
	cache-control: no-cache
	connection: keep-alive
	cookie: JSESSIONID=D582A6AE93A0E391A55ED7B906A63D63
	host: localhost:8080
	postman-token: fe68ffa5-c0ca-4c71-ac3d-8fb3adf5da07
	user-agent: PostmanRuntime/7.29.2
payload :

response:
	status:400
	datetime:1767718784654
	duration:187
	contentType:application/json
	headers:
		Access-Control-Allow-Credentials: true
		Access-Control-Allow-Headers:
		Access-Control-Allow-Methods: GET, POST, PUT, DELETE, PATCH, OPTIONS
		Access-Control-Allow-Origin: *
		Access-Control-Expose-Headers:
		Connection: close
		Content-Type: application/json
		Date: Tue, 06 Jan 2026 16:59:44 GMT
		Set-Cookie: JSESSIONID=589B9777ABF4B3DAC4D2A0DD16B05C4B; Path=/; HttpOnly
		Transfer-Encoding: chunked
		accept: */*
		accept-encoding: gzip, deflate, br
		cache-control: no-cache
		connection: close
		cookie: JSESSIONID=D582A6AE93A0E391A55ED7B906A63D63
		host: localhost:8080
		postman-token: fe68ffa5-c0ca-4c71-ac3d-8fb3adf5da07
		user-agent: PostmanRuntime/7.29.2
		x-b3-traceid: e3b7739e-d1f3-41cc-ba75-922c5db921dc
		x-correlation-id: 3d69a6dc-9cc5-49fd-9812-03beb8dc34c3
		x-device-identifier: 2f411cae-e3b4-4465-b86a-e001c2b64d74
	payload:{"cause":{"errors":[],"message":"uid required to find user","parameters":[]},"detail":"","details":{"errorCode":"USER-2_0","fields":[],"application":"demo","version":"@project.version@","errorType":"functional","rollback":false,"retryable":false,"errorDomain":"USER","service":"UserRestController_getById"},"errors":[],"message":"uid required to find user","parameters":[],"reasonPhrase":"Bad Request","status":400}
]]>
    </src>


    <src name="warning" type="java" title="Warning">
        <![CDATA[
public interface Warning {

Warning getCurrentWaring();

    default String getWarningCode() { }

    default String getMessage() { }

    default String getMessageDetail() { }

    default String getWarningType() { }

    default Warning addDetail(final String detail, final Object... values) { }

    default String getCategory() { }

    default String getDomain() { }

    default String getSubDomain() {}

    default Map<String, Serializable> toMap() { }

    default DefaultWarning.DefaultWarningBuilder toBuilder() { }
}

]]>
    </src>

    <src name="warningEnum" type="java" title="Warning enum">
        <![CDATA[
public enum UserWarning implements Warning {
    READ_PARTIAL_INFO(DefaultWarning.builder()
                                    .warningCode("WARN-USER-2_0")
                                    .category("providers")
                                    .message("some providers can't retrieve user's information")
                                    .domain(UserWarning.Constants.USER)
    );

    public static final Collection<UserWarning> VALUES = Collections.unmodifiableCollection(Arrays.asList(values()));
    private final Warning warning;

    private UserWarning(final DefaultWarning.DefaultWarningBuilder builder) {
        warning = builder.build();
    }


    @Override
    public Warning getCurrentWaring() {
        return warning;
    }

    private static class Constants {
        public static final String USER = "USER";
    }
}
]]>
    </src>


    <src name="warningEnumTest" type="java" title="Warning enum unit test">
        <![CDATA[
class UserWarningTest {

    @Test
    void assertUserWarning() {
        UnitTestHelper.assertWaringCodeUnique(UserWarning.values());
        UnitTestHelper.assertWarningCode("api/domain/user/exception/assertUserWarning.json",
                                         UserWarning.values());
    }
}
]]>
    </src>

    <src name="warningUsage" type="java" title="Warning usage">
        <![CDATA[

@RequiredArgsConstructor
@Service
public class UserService implements IUserService {
    private final IUserDao userDao;

    @Override
    public UserDTO getById(final String id, final Boolean full) {
        assertRegexMatch(READ_USER_UID_REQUIRED, UID_REGEX, id);

        final var result = userDao.getById(id, full);

        WarningContext.getInstance().addWarnings(UserWarning.READ_PARTIAL_INFO);

        assertNotNull(READ_USER_NOT_FOUND, result);
        return result;
    }
}
]]>
    </src>


    <src name="iolog_with_warn" type="text" title="IOLOG with warn">
        <![CDATA[
    06/01 21:33:46]|IOLOG|INFO |http-nio-8080-exec-5|  | [GET] /ws/user/183ef379-cb0c-4bba-9120-ff54c2077dc7
headers :
	accept: */*
	accept-encoding: gzip, deflate, br
	cache-control: no-cache
	connection: keep-alive
	cookie: JSESSIONID=119D604918A7DE3D6A61E5EED81C640B
	host: localhost:8080
	postman-token: 375dfd67-e8e0-49f1-ab1c-90a874a9a7ce
	user-agent: PostmanRuntime/7.29.2
payload :

response:
	status:200
	datetime:1767731626524
	duration:116
	contentType:application/json
	headers:
		Access-Control-Allow-Credentials: true
		Access-Control-Allow-Headers:
		Access-Control-Allow-Methods: GET, POST, PUT, DELETE, PATCH, OPTIONS
		Access-Control-Allow-Origin: *
		Access-Control-Expose-Headers:
		Content-Type: application/json
		WARN-USER-2_0: some providers can't retrieve user's information
		accept: */*
		accept-encoding: gzip, deflate, br
		cache-control: no-cache
		connection: keep-alive
		cookie: JSESSIONID=119D604918A7DE3D6A61E5EED81C640B
		host: localhost:8080
		postman-token: 375dfd67-e8e0-49f1-ab1c-90a874a9a7ce
		user-agent: PostmanRuntime/7.29.2
		x-b3-traceid: e5c06711-2901-4325-bfaa-5378fbf283c8
		x-correlation-id: 3d69a6dc-9cc5-49fd-9812-03beb8dc34c3
		x-device-identifier: 2f411cae-e3b4-4465-b86a-e001c2b64d74
		x-warnings: WARN-USER-2_0
	payload:{"audit":{"createdBy":"system","createdDate":"2026-01-06T20:33:30.813397","version":1},"email":"john.smith.mock@inugami.io","firstName":"John","lastName":"Smith","uid":"183ef379-cb0c-4bba-9120-ff54c2077dc7"}
]]>
    </src>

    <src name="WarningCors" type="java" title="Add warning code to cors">
        <![CDATA[
@Component
public class WarningCors implements CorsHeadersSpi {
    @Override
    public List<String> buildCorsHeaders(final RequestData request, final ConfigHandler<String, String> configuration) {
        return UserWarning.VALUES.stream()
                                 .map(Warning::getWarningCode)
                                 .toList();
    }
}
]]>
    </src>
</xml>